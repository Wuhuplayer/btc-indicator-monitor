# CSV数据 vs 原始图表 - 详细对比报告

生成时间：2025-10-09

---

## 📊 总体评估

| 指标 | 数据质量 | 异常数量 | 严重程度 | 状态 |
|------|---------|---------|----------|------|
| **STH MVRV** | ❌❌❌ | 163个异常点 | **严重** | ⚠️ 需要修复 |
| **LTH Net Change 30D** | ❌❌ | 85个异常巨变 | 中等 | ⚠️ 需要修复 |
| **鲸鱼持仓 30天变化** | ✓ | 18个跳跃 | 轻微 | ✓ 可以使用 |

---

## 1️⃣ STH MVRV 数据问题

### 问题类型

#### A. 魔法数字（重复异常值）
- **1.0410**: 出现 **26次**（错误的重复值）
- **1.0414**: 出现 **13次**（错误的重复值）
- **1.0422**: 出现 **10次**（错误的重复值）

**原因分析**：
- 图像数字化工具误读Y轴坐标
- 某些点被错误映射到1.04附近的水平参考线
- 该值不是真实数据点，而是图表上的辅助线

#### B. 异常跳跃（尖刺模式）
典型案例：
```
2022-07-23: 0.8606 → 正常
2022-07-24: 1.0930 → ❌ 突然跳高！（+23%）
2022-07-25: 1.0414 → ❌ 继续异常

2022-06-08: 1.0410 → ❌ 错误值
2022-06-09: 0.8659 → 正常（跳回来）
```

**问题特征**：
- 单日跳跃幅度达 0.15-0.23（15-23%）
- 跳到1.04后又立即跳回0.85-0.90
- 与图表显示的平滑曲线不符

#### C. 2022年熊市期间数据问题
- **时间段**：2022年1月-12月
- **问题**：134个数据点标记为>0.95
- **对比图表**：
  - 2022年1-5月：可能部分>0.95是合理的（市场初期下跌）
  - 2022年6-11月：应该持续在**0.74-0.90**低位
  - 但CSV数据多次跳到1.04-1.09，明显错误！

### 关键异常时段

#### 2022年6-8月（最严重）
发现 **14个** 异常跳跃：
```
2022-06-08: 1.0410  ❌
2022-06-23: 1.0410  ❌
2022-06-24: 1.0414  ❌
2022-07-01: 1.0410  ❌
2022-07-12: 1.0418  ❌
2022-07-13: 1.0410  ❌
2022-07-15: 1.0410  ❌
2022-07-24: 1.0930  ❌ (最严重)
2022-08-16: 1.0930  ❌
...
```

**图表对比**：
- 图表显示：2022年6-8月STH MVRV在**0.85-0.90**平稳运行
- CSV数据：频繁跳到**1.04-1.09**
- **结论**：这些高值是100%的错误！

---

## 2️⃣ LTH Net Change 30D 数据问题

### 问题描述
- 发现 **85个** 单日变化超过10万BTC的异常巨变
- 最大单日变化：**270,886 BTC**（2022-09-09）

### 典型案例
```
日期             变化量(BTC)
2022-09-09      270,886   ❌ 异常
2021-05-06      260,338   ❌ 异常
2023-01-26      190,928   ❌ 异常
```

### 问题分析
**理论上**：
- LTH Net Change是30天滚动数据
- 应该有一定平滑性
- 单日巨变>10万BTC不太合理

**可能原因**：
1. 图像数字化时Y轴坐标系识别问题
2. 紫色填充区域的边界识别不准确
3. 原始数据确实波动大（部分可能是真实的）

**对比图表**：
- 需要逐一对照原图验证这些巨变点是否真实存在
- 图表上的大峰值应该是逐渐上升/下降，而不是突然跳跃

---

## 3️⃣ 鲸鱼持仓 30天变化

### 数据质量
✅ **相对正常**

### 轻微问题
- 发现 18个 单日变化>0.008的跳跃
- 但整体趋势平滑，数值范围合理

### 评估
- 数值范围：-0.026 到 +0.049 ✓
- 平均变化：0.0012 ✓  
- 与图表显示基本一致 ✓

**结论**：可以直接使用，无需大幅修正

---

## 🔍 根本原因分析

### 图像数字化工具的问题

1. **Y轴坐标识别错误**
   - STH MVRV图表上有多条曲线（蓝色主线、红色参考线等）
   - 工具可能混淆了不同的曲线
   - 把主线的点误读到了参考线的位置

2. **颜色识别不准确**
   - 蓝色线条边界模糊
   - 可能受到背景网格线干扰
   - 在低对比度区域识别失败

3. **插值算法问题**
   - 某些缺失点用了错误的插值方法
   - 导致重复出现相同的"魔法数字"

---

## 📋 需要修复的数据清单

### 优先级1：STH MVRV（严重）
- ✅ 已生成异常数据清单：`STH_MVRV_异常数据清单.csv`
- 需要修复：**163个异常点**

#### 重点修复区域
1. **2022年6-8月**：22个错误的>0.95值 → 应修正为0.85-0.90
2. **魔法数字1.0410**：26次出现 → 需用前后值插值
3. **魔法数字1.0414**：13次出现 → 需用前后值插值
4. **大跳跃点**：31个>0.1的跳跃 → 需平滑处理

### 优先级2：LTH Net Change（中等）
- 需要修复：**85个异常巨变点**
- 修复方法：对照原图逐一验证，平滑过度点

### 优先级3：鲸鱼持仓（低）
- 轻微问题：18个跳跃点
- 可选修复：小幅平滑即可

---

## 💡 修复建议

### 方案1：自动修复（推荐）
```python
# 对于明显的异常值，使用前后值的插值
for 异常点 in 异常点列表:
    if 是魔法数字(异常点):
        异常点.value = (前一天.value + 后一天.value) / 2
    elif 是大跳跃(异常点):
        异常点.value = 线性插值(前一天, 后一天)
```

### 方案2：重新数字化
- 优化图像处理脚本
- 改进Y轴坐标识别算法
- 加强颜色过滤精度

### 方案3：手工修正
- 对照原图，手工修正关键异常点
- 特别是2022年6-8月的数据

---

## ✅ 下一步行动

1. **立即修复STH MVRV的163个异常点**
   - 重点处理2022年6-8月的错误高值
   - 替换魔法数字为插值
   
2. **验证LTH数据的异常巨变**
   - 对照原图确认哪些是真实波动
   - 平滑明显的错误跳跃

3. **保留鲸鱼持仓数据**
   - 可选择性进行轻微平滑
   - 或直接使用当前数据

4. **生成修复后的新数据文件**
   - 命名：`【已修复】xxx.csv`
   - 保留原始文件作为备份

---

## 📊 对比原始图表的关键发现

### STH MVRV图表特征
- ✅ 2020-2021年初：波动上升，最高1.5+
- ❌ **2022年6-11月：应在0.74-0.90，CSV数据错误跳到1.04**
- ✅ 2023-2024年：逐步回升至1.1-1.3
- ✅ 2025年：在1.1附近波动

### LTH图表特征
- ✅ 紫色填充区域在0轴上下波动
- ⚠️ 峰值应该是连续的，不应有突然跳跃
- ❌ CSV数据存在85个不连续点

### 鲸鱼持仓图表特征
- ✅ 数值范围-0.03到+0.05
- ✅ 相对平滑，与CSV数据基本一致
- ✅ 无明显异常

---

**结论**：需要对STH MVRV和LTH数据进行修复后才能用于策略回测！

